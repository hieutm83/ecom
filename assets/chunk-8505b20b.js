import{a as s,g as G,c as y,b as U}from"./chunk-5d6d9427.js";function S(e,t,n){return typeof e=="string"?$(e.split(""),t,n).join(""):$(e,t,n)}function $(e,t,n){const i=[];let r=t>=0?t:e.length+t;s(r>=0&&r<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(r===o||(r===e.length&&(r=0),r===o));){const a=e[r];s(a!==void 0),i.push(a),r++}return i}function k(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function B(e,t){s(k(e),{url:e}),s(t.startsWith("/"),{url:e,baseUrl:t});const[n,...i]=e.split("#");s(n!==void 0);const r=["",...i].join("#")||null;s(r===null||r.startsWith("#"));const o=r===null?"":b(r.slice(1)),[a,...l]=n.split("?");s(a!==void 0);const c=["",...l].join("?")||null;s(c===null||c.startsWith("?"),{url:e,searchOriginal:c});const d={},F={};Array.from(new URLSearchParams(c||"")).forEach(([p,m])=>{d[p]=m,F[p]=[...F[p]||[],m]});const{origin:g,pathnameResolved:_}=J(e,t);s(g===null||g===b(g),{origin:g}),s(_.startsWith("/"),{url:e,pathnameResolved:_}),s(g===null||e.startsWith(g),{url:e,origin:g});const I=a.slice((g||"").length);{const p=`${g||""}${I}${c||""}${r||""}`;s(e===p,{url:e,urlRecreated:p})}let{pathname:u,hasBaseUrl:h}=Y(_,t);return u=H(u),s(u.startsWith("/")),{origin:g,pathname:u,pathnameOriginal:I,hasBaseUrl:h,search:d,searchAll:F,searchOriginal:c,hash:o,hashOriginal:r}}function b(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function H(e){return e.split("/").map(t=>b(t).split("/").join("%2F")).join("/")}function J(e,t){var n;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let i,r;try{const o=new URL(e);i=o.origin,r=o.pathname}catch{i=null;let a=typeof window!="undefined"&&((n=window==null?void 0:window.document)===null||n===void 0?void 0:n.baseURI);a=a||"http://fake.example.org"+t,r=new URL(e,a).pathname}return s(r.startsWith("/"),{url:e,pathnameResolved:r}),s(r===r.split("?")[0].split("#")[0]),{origin:i,pathnameResolved:r}}function V(e){s(e.startsWith("/"))}function q(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function Y(e,t){q(e),V(t);let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseUrl:!0};let i=t;return t.endsWith("/")&&n===S(t,0,-1)&&(i=S(t,0,-1),s(n===i)),n.startsWith(i)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(i)),n=n.slice(i.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseUrl:!0}):{pathname:e,hasBaseUrl:!1}}function $e(e){const t=window.location.href,{origin:n,searchOriginal:i,hashOriginal:r,pathnameOriginal:o}=B(t,"/");let a;if(e!=null&&e.withoutHash){a=`${o}${i||""}`;const l=`${n||""}${a}${r||""}`;s(t===l,{url:t,urlRecreated:l})}else{a=`${o}${i||""}${r||""}`;const l=`${n||""}${a}`;s(t===l,{url:t,urlRecreated:l})}return a}function x(e){return e instanceof Function||typeof e=="function"}function f(e,t,n="unknown"){if(!(typeof e=="object"&&e!==null&&t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="string[]"?Array.isArray(r)&&r.every(o=>typeof o=="string"):n==="function"?x(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function K(){return typeof window!="undefined"&&typeof window.scrollY=="number"}function z(e,t){Object.assign(e,t)}function E(e){return typeof e=="object"&&e!==null}const Q=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt=="undefined")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],i=t[2];return new RegExp(n,i)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function O(e){const t=JSON.parse(e);return L(t)}function L(e){return typeof e=="string"?X(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=L(n)}),e)}function X(e){for(const{match:t,deserialize:n}of Q)if(t(e))return n(e,O);return e}function Ae(){var e;const t=(e=document.getElementById("vite-plugin-ssr_pageContext"))===null||e===void 0?void 0:e.textContent;s(t);const n=O(t);s(f(n,"pageContext","object"));const{pageContext:i}=n;if(s(f(i,"_pageId","string")),"_serverSideErrorWhileStreaming"in i)throw G("An error occurred on the server while rendering/streaming to HTML. Check your server logs.");return z(i,{_pageContextRetrievedFromServer:{...i},_comesDirectlyFromServer:!0}),i}function Z(e){return Array.from(new Set(e))}function Te(e){return(t,n)=>{const i=e(t),r=e(n);return i===r?0:i>r?-1:1}}function ee(e){return(t,n)=>{const i=e(t),r=e(n);if(s([!0,!1,null].includes(i)),s([!0,!1,null].includes(r)),i===r)return 0;if(i===!0||r===!1)return-1;if(r===!0||i===!1)return 1;s(!1)}}function te(e){return ee(t=>{const n=e(t);return n===null?null:!n})}function ne(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const re=e=>e!=null,ie="\\";function w(e){s(e&&!e.includes(ie),`Wrongly formatted path: ${e}`)}function se(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function ae(e,t){return D(e,t,!0)}function ze(e,t){return D(e,t,!1)}function D(e,t,n){const i=n?".page.client":".page.server",r=oe(i,t),o=e.filter(u=>u.isRelevant(t)),a=u=>o.filter(h=>h.isRendererPageFile&&h.fileType===u).sort(r)[0],l=u=>{const h=o.filter(m=>m.pageId===t&&m.fileType===u);y(h.length<=1,`Merge the following files into a single file: ${h.map(m=>m.filePath).join(" ")}`);const p=h[0];return s(p===void 0||!p.isDefaultPageFile),h[0]},c=o.filter(u=>u.isDefaultPageFile&&!u.isRendererPageFile&&(u.fileType===i||u.fileType===".page"));c.sort(r);const d=a(i),F=a(".page"),g=l(i),_=l(".page");return[g,_,...c,d,F].filter(re)}function oe(e,t){return(o,a)=>{s(o.isDefaultPageFile&&a.isDefaultPageFile);{const l=o.isRendererPageFile,c=a.isRendererPageFile;if(!l&&c)return-1;if(!c&&l)return 1;s(l===c)}{const l=A(t,o.filePath),c=A(t,a.filePath);if(l<c)return-1;if(c<l)return 1;s(l===c)}{if(o.fileType===e&&a.fileType!==e)return-1;if(a.fileType===e&&o.fileType!==e)return 1}{if(o.fileType===".page"&&a.fileType!==".page")return 1;if(a.fileType===".page"&&o.fileType!==".page")return-1}return 0}}function A(e,t){w(e),w(t),s(e.startsWith("/")),s(t.startsWith("/"));let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const i=e.slice(n),r=t.slice(n),o=i.split("/").length,a=r.split("/").length;return o+a}function Oe(e){const t=e.filter(n=>j(n));if(y(t.length<=1,`Only one \`_error.page.js\` is allowed. Found several: ${t.join(" ")}`),t.length>0){const n=t[0];return s(n),n}return null}function j(e){return s(!e.includes("\\")),e.includes("/_error")}function le(e,t){if(!(t in e.exports))return null;const n=e.exports[t],i=e.exportsAll[t][0];s(i.exportValue===n);const r=i._filePath;return s(r),s(!t.endsWith(")")),y(x(n),`\`export { ${t} }\` of ${r} should be a function`),{hook:n,filePath:r}}function ce(e,t){le(e,t)}function ue(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[i])=>ne(n,i)).forEach(([n,i])=>{e[n]=i})}function Le(e){s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(E(e.pageExports));const t=e.exports.Page;return z(e,{Page:t}),pe(e),ue(e),s([!0,!1].includes(e._comesDirectlyFromServer)),e._comesDirectlyFromServer?ge(e):e}const fe=["then","toJSON"],de=["_pageId","_serverSideErrorWhileStreaming"];let W=!1;function ge(e){return new Proxy(e,{get:n});function t(i){return!(i in e||fe.includes(i)||typeof i=="symbol"||typeof i!="string"||i.startsWith("__v_"))}function n(i,r){return W!==!1&&W!==r&&he(e._pageContextRetrievedFromServer,r,t(r)),W=r,window.setTimeout(()=>{W=!1},0),e[r]}}function he(e,t,n){if(!n||e===null)return;const i=Object.keys(e).filter(r=>!de.includes(r));y(!1,[`\`pageContext.${t}\` is not available in the browser.`,`Make sure that \`passToClient.includes('${t}')\`.`,`(Currently \`passToClient\` is \`[${i.map(r=>`'${r}'`).join(", ")}]\`.)`,"More infos at https://vite-plugin-ssr.com/passToClient"].join(" "))}function pe(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}const ye=["clientRouting"];function me(e){ye.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;y(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is forbidden: remove \`export { ${t} }\` instead. (${n})`),y(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const C=["render","clientRouting","prerender","doNotPrerender"];function ve(e,t){y(!C.includes(e),`${t} has \`export default { ${e} }\` which is forbidden, use \`export { ${e} }\` instead.`)}function we(e){const t={};e.forEach(r=>{Fe(r).forEach(({exportName:a,exportValue:l,isFromDefaultExport:c})=>{var d;s(a!=="default"),t[a]=(d=t[a])!==null&&d!==void 0?d:[],t[a].push({exportValue:l,_filePath:r.filePath,_fileType:r.fileType,_isFromDefaultExport:c})})});const n=_e(),i={};return Object.entries(t).forEach(([r,o])=>{o.forEach(({exportValue:a,_fileType:l,_isFromDefaultExport:c})=>{var d;i[r]=(d=i[r])!==null&&d!==void 0?d:a,l===".page"&&!c&&(r in n||(n[r]=a))})}),s(!("default"in i)),s(!("default"in t)),{exports:i,exportsAll:t,pageExports:n}}function Fe(e){const{filePath:t,fileExports:n}=e;s(n);const i=[];return Object.entries(n).sort(te(([r])=>r==="default")).forEach(([r,o])=>{let a=r==="default";if(a)if(!se(t))r="Page";else{y(E(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([l,c])=>{ve(l,t),i.push({exportName:l,exportValue:c,isFromDefaultExport:a})});return}i.push({exportName:r,exportValue:o,isFromDefaultExport:a})}),i.forEach(({exportName:r,isFromDefaultExport:o})=>{s(!(o&&C.includes(r)))}),i}function _e(){return new Proxy({},{get(...e){return K()||U(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function M(e){const t=".page.",n=S(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function Ee(e){const t=r=>i.pageId===r||i.isDefaultPageFile&&(i.isRendererPageFile||Se(r,i.filePath)),n=We(e),i={filePath:e,fileType:n,isRelevant:t,isDefaultPageFile:P(e),isRendererPageFile:P(e)&&Re(e),isErrorPageFile:j(e),pageId:M(e)};return i}function We(e){w(e);const n=e.split("/").slice(-1)[0].split("."),i=n.slice(-3)[0],r=n.slice(-2)[0];if(r==="page")return".page";if(s(i==="page",{filePath:e}),r==="server")return".page.server";if(r==="client")return".page.client";if(r==="route")return".page.route";s(!1,{filePath:e})}function P(e){return w(e),s(e.startsWith("/")),j(e)?!1:e.includes("/_default")}function Re(e){return w(e),s(e.startsWith("/")),e.includes("/renderer/")}function Se(e,t){w(e),w(t),s(e.startsWith("/")),s(t.startsWith("/")),s(!e.endsWith("/")),s(!t.endsWith("/")),s(P(t));const n=S(t.split("/"),0,-1).filter(i=>i!=="_default").join("/");return e.startsWith(n)}const Ie=[".page",".page.server",".page.route",".page.client"];function be(e){s(f(e,"isGeneratedFile"),"Missing `isGeneratedFile`."),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(f(e,"pageFilesLazy","object")),s(f(e,"pageFilesEager","object")),s(f(e,"pageFilesExportNamesLazy","object")),s(f(e,"pageFilesExportNamesEager","object")),s(f(e.pageFilesLazy,".page")),s(f(e.pageFilesLazy,".page.client")||f(e.pageFilesLazy,".page.server"));const t={};R(e.pageFilesLazy).forEach(({filePath:i,pageFile:r,globValue:o})=>{var a;r=t[i]=(a=t[i])!==null&&a!==void 0?a:r;const l=o;T(l),r.loadFile=async()=>{"fileExports"in r||(r.fileExports=await l(),me(r))}}),R(e.pageFilesExportNamesLazy).forEach(({filePath:i,pageFile:r,globValue:o})=>{var a;r=t[i]=(a=t[i])!==null&&a!==void 0?a:r;const l=o;T(l),r.loadExportNames=async()=>{if(!("exportNames"in r)){const c=await l();s(f(c,"exportNames","string[]"),r.filePath),r.exportNames=c.exportNames}}}),R(e.pageFilesEager).forEach(({filePath:i,pageFile:r,globValue:o})=>{var a;r=t[i]=(a=t[i])!==null&&a!==void 0?a:r;const l=o;s(E(l)),r.fileExports=l}),R(e.pageFilesExportNamesEager).forEach(({filePath:i,pageFile:r,globValue:o})=>{var a;r=t[i]=(a=t[i])!==null&&a!==void 0?a:r;const l=o;s(E(l)),s(f(l,"exportNames","string[]"),r.filePath),r.exportNames=l.exportNames});const n=Object.values(t);return n.forEach(({filePath:i})=>{s(!i.includes("\\"))}),n}function R(e){const t=[];return Object.entries(e).forEach(([n,i])=>{s(Ie.includes(n)),s(E(i)),Object.entries(i).forEach(([r,o])=>{const a=Ee(r);s(a.fileType===n),t.push({filePath:r,pageFile:a,globValue:o})})}),t}function T(e){s(x(e))}const v=globalThis.__vite_plugin_ssr__pageFiles=globalThis.__vite_plugin_ssr__pageFiles||{pageFilesAll:void 0,pageFilesGetter:void 0};function De(e){v.pageFilesAll=be(e)}async function Ce(e,t){e?(s(!v.pageFilesGetter),s(t===void 0)):(s(v.pageFilesGetter),s(typeof t=="boolean"),(!v.pageFilesAll||!t)&&await v.pageFilesGetter()),s(v.pageFilesAll);const n=v.pageFilesAll,i=Pe(n);return{pageFilesAll:n,allPageIds:i}}function Pe(e){const t=e.filter(({isDefaultPageFile:i})=>!i).map(({filePath:i})=>i).map(M);return Z(t)}function xe(e,t){return ae(e,t)}const N="__whileFetchingAssets";async function Me(e,t){const n=xe(e,t);try{await Promise.all(n.map(l=>{var c;return(c=l.loadFile)===null||c===void 0?void 0:c.call(l)}))}catch(l){throw l&&Object.assign(l,{[N]:!0}),l}const{exports:i,exportsAll:r,pageExports:o}=we(n);return{exports:i,exportsAll:r,pageExports:o,_pageFilesLoaded:n}}function Ne(e){return e?e[N]===!0:!1}function Ge(e){var t;if(f(e.exports,"render"))ce(e,"render");else{const n=e._pageFilesLoaded.filter(r=>r.fileType===".page.client");let i;if(n.length===0){const r=(t=e.urlOriginal)!==null&&t!==void 0?t:window.location.href;i="No file `*.page.client.*` found for URL "+r}else i="One of the following files should export a `render()` hook: "+n.map(r=>r.filePath).join(" ");y(!1,i)}}export{ze as a,x as b,Te as c,j as d,Ae as e,Oe as f,$e as g,f as h,E as i,le as j,O as k,Me as l,ee as m,V as n,z as o,B as p,Ce as q,Le as r,S as s,xe as t,k as u,Ne as v,ce as w,Ge as x,K as y,De as z};