import{C as Z,r as u,j as a,n as k,d as m,e as N,m as C,c as J,i as $,b as X,q as T,F as f,u as V,a as D,an as K,a3 as z,bY as ee,f as j,b$ as W}from"../../../chunk-19e1ba83.js";import{W as se}from"../../../chunk-0c2a0f3e.js";import{af as ae,am as y,an as A,ao as B,ap as w,ai as P,al as le,aq as te,aj as re,ar as ne,as as _}from"../../../chunk-438c4642.js";import"../../../chunk-86e11248.js";import{u as oe}from"../../../chunk-7e8ccf70.js";import{u as ie,S as H,M as ce,a as de}from"../../../chunk-5998814f.js";import{n as me}from"../../../chunk-06db561b.js";import"../../../chunk-5d6d9427.js";import"../../../chunk-8505b20b.js";import{C as ue}from"../../../chunk-dc0f306a.js";import"../../../chunk-e4587ebd.js";import"../../../chunk-0e07c050.js";function Q(e){return Z(e).toLowerCase()}function F(){const[e,l]=u.exports.useState({x:null,y:null}),o=u.exports.useCallback((...t)=>{if(typeof t[0]=="object")window.scrollTo(t[0]);else if(typeof t[0]=="number"&&typeof t[1]=="number")window.scrollTo(t[0],t[1]);else throw new Error("Invalid arguments passed to scrollTo. See here for more info. https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo")},[]),s=()=>{l({x:window.scrollX,y:window.scrollY})},i=u.exports.useCallback(ae(s,200),[]);return u.exports.useEffect(()=>(s(),window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[i]),[e,o]}const G=u.exports.createContext({}),he=({children:e})=>{const[l,o]=u.exports.useState(1),s=u.exports.useMemo(()=>({pageNo:l,setPageNo:o}),[l,o]);return a(G.Provider,{value:s,children:e})},U=()=>{const e=u.exports.useContext(G);if(e===void 0)throw new Error("usePageNoContext must be used within a PageNoProvider");return e},q=u.exports.forwardRef(function(l,o){const{heroSection:s}=k(),i=(s==null?void 0:s.title)||(s==null?void 0:s.subTitle);return m("div",{id:"home-banner",className:"relative bg-white",ref:o,children:[a("div",{"aria-hidden":"true",id:"banner-background",className:N(i?"absolute inset-0 overflow-hidden":""),children:s.coverImage&&a("img",{src:s.coverImage,alt:"cover image",id:"banner-cover-image",className:"h-full w-full object-cover object-center"})}),i&&a("div",{"aria-hidden":"true",id:"banner-overlay",className:"absolute inset-0 bg-gray-900 opacity-40"}),i&&m("div",{id:"banner-content",className:N("relative mx-auto flex max-w-3xl flex-col items-center px-6 text-center lg:px-0",i?"py-24 sm:py-32":"py-32 sm:py-48"),children:[a("h1",{id:"banner-title",className:"text-3xl font-extrabold tracking-tight text-white empty:hidden sm:text-4xl lg:text-5xl",style:{color:s==null?void 0:s.titleColor},children:s==null?void 0:s.title}),a("p",{id:"banner-subtitle",className:"mt-1 text-base text-white empty:hidden sm:mt-2 sm:text-lg",style:{color:s==null?void 0:s.subTitleColor},children:s==null?void 0:s.subTitle})]})]})});function ge({products:e,isLast:l}){var I,S,E,L,R,O,M;const{pageNo:o,setPageNo:s}=U(),i=C(),t=J(),c=$(i,"categories",[]),d=X(),{open:n,close:p,show:h,message:b}=ie(),x=u.exports.useRef();u.exports.useEffect(()=>{if(!(x!=null&&x.current)||l&&o*y>=(c==null?void 0:c.length))return;const g=new IntersectionObserver(([v])=>{l&&v.isIntersecting&&(s(Y=>Y+1),g.unobserve(v.target))},{threshold:.25});g.observe(x.current)},[l,s,c,o]);const r=u.exports.useMemo(()=>$(e,"0.category",{}),[e]);return!T(e)&&m(f,{children:[m("section",{ref:x,"aria-labelledby":`products-heading-${r==null?void 0:r.slug}`,className:"category-section mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8","data-category":r==null?void 0:r.slug,children:[a("h2",{id:`products-heading-${r==null?void 0:r.slug}`,className:"sr-only",children:(I=d[Q(r==null?void 0:r.value)])!=null?I:r==null?void 0:r.value}),m("div",{className:"flex flex-col items-center justify-center gap-2 pb-12",children:[a("a",{className:"multiline-truncate category-title text-xl font-extrabold tracking-tight text-gray-900 sm:text-2xl",href:`/category/${r==null?void 0:r.slug}`,children:(S=d[Q(r==null?void 0:r.value)])!=null?S:r==null?void 0:r.value}),!T(e)&&(e==null?void 0:e.length)>4&&m("a",{href:`/category/${r==null?void 0:r.slug}`,className:"category-view-all inline-flex flex-shrink-0 items-center rounded border border-primary px-3 py-1.5 text-xs font-semibold leading-4 text-primary-alt transition hover:bg-primary/10 hover:text-primary-alt focus:outline-none focus:ring-2 focus:ring-primary/75 focus:ring-offset-2 sm:text-sm",children:[(E=d.viewAll)!=null?E:"View all",a("span",{"aria-hidden":"true",className:"ms-2",children:t!=null&&t.isRtlLanguage?a(f,{children:" \u2190"}):a(f,{children:" \u2192"})})]})]}),a("div",{className:"hidden lg:contents",children:a(A,{opts:{align:"start",slidesToScroll:2,breakpoints:{"(min-width: 1024px)":{slidesToScroll:4}},watchDrag:!1,direction:t!=null&&t.isRtlLanguage?"rtl":"ltr"},withControls:(e==null?void 0:e.length)>4,className:"category-carousel-lg",children:m(B,{className:"category-carousel-lg-content",children:[(L=e==null?void 0:e.slice(0,11))==null?void 0:L.map((g,v)=>a(w,{className:"category-carousel-lg-item basis-1/2 lg:basis-1/4",children:a(P,{product:g,openToast:n,carouselId:`product-card-carousel-${g==null?void 0:g.slug}-lg`})},v)),(e==null?void 0:e.length)>11&&a(w,{className:"category-carousel-lg-item basis-1/2 lg:basis-1/4",children:m("a",{className:"view-all-card-lg flex h-full cursor-pointer items-center justify-center rounded-lg border p-8 text-lg font-medium text-primary transition-all hover:border-primary hover:bg-primary/10",href:`/category/${r==null?void 0:r.slug}`,children:[(R=d.viewAll)!=null?R:"View all",a("span",{"aria-hidden":"true",className:"ms-2",children:t!=null&&t.isRtlLanguage?a(f,{children:" \u2190"}):a(f,{children:" \u2192"})})]})})]})})}),a("div",{className:"contents lg:hidden",children:a(A,{opts:{align:"start",slidesToScroll:2,breakpoints:{"(min-width: 1024px)":{slidesToScroll:4}},watchDrag:!1,direction:t!=null&&t.isRtlLanguage?"rtl":"ltr"},withControls:(e==null?void 0:e.length)>2,className:"category-carousel-sm",children:m(B,{className:"category-carousel-sm-content",children:[(O=e==null?void 0:e.slice(0,11))==null?void 0:O.map((g,v)=>a(w,{className:"category-carousel-sm-item basis-1/2 lg:basis-1/4",children:a(P,{product:g,openToast:n,carouselId:`product-card-carousel-${g==null?void 0:g.slug}-sm`})},v)),(e==null?void 0:e.length)>11&&a(w,{className:"category-carousel-sm-item basis-1/2 lg:basis-1/4",children:m("a",{className:"view-all-card-sm flex h-full cursor-pointer items-center justify-center rounded-lg border p-8 text-lg font-medium text-primary transition-all hover:border-primary hover:bg-primary/10",href:`/category/${r==null?void 0:r.slug}`,children:[(M=d.viewAll)!=null?M:"View all",a("span",{"aria-hidden":"true",className:"ms-2",children:t!=null&&t.isRtlLanguage?a(f,{children:" \u2190"}):a(f,{children:" \u2192"})})]})})]})})}),a(le,{show:h,action:()=>me("/cart"),close:p,message:b})]}),!l&&a("hr",{className:"h-2 bg-gray-100"})]})}const pe=({categories:e,page:l,totalPage:o})=>{const s=V(),{data:i,isLoading:t}=D(()=>`/store/${s}/grouped-products-by-category?page=${l}`),c=e==null?void 0:e.slice((l-1)*y,l*y),d=(e==null?void 0:e.slice(0,o*y).length)-1;return t&&!i?a("div",{className:"animate-pulse space-y-10 pt-8 sm:space-y-16 sm:pt-12",children:Array.from({length:1}).map((n,p)=>m("section",{className:"mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:[a("div",{className:"flex items-center justify-between pb-6",children:a("div",{className:"h-10 w-1/5 rounded bg-gray-200"})}),a("div",{className:"grid grid-cols-2 gap-x-2 gap-y-4 sm:grid-cols-2 sm:gap-x-6 sm:gap-y-10 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:Array.from({length:4}).map((h,b)=>a("div",{className:"flex h-full min-h-[375px] rounded-lg bg-gray-200"},b))})]},p))}):a("div",{className:"space-y-10 pt-8 sm:space-y-16 sm:pt-12",id:"category-section-list",children:i&&(c==null?void 0:c.map(n=>a(ge,{products:i[n==null?void 0:n.slug],isLast:(n==null?void 0:n.index)>=d},n==null?void 0:n.slug)))})};function xe(){const e=V(),{data:l,isLoading:o,isValidating:s,size:i,setSize:t}=te((d,n)=>`/store/${e}/products?page=${d+1}`),c=u.exports.useRef();return u.exports.useEffect(()=>{var n;if(!c.current||l&&((n=l[l.length-1])==null?void 0:n.length)<re)return;const d=new IntersectionObserver(([p])=>{p.isIntersecting&&t(h=>h+1)},{threshold:.25,rootMargin:"50px"});return d.observe(c.current),()=>{d.disconnect()}},[t,l]),a("section",{"aria-labelledby":"products-heading",className:"mx-auto max-w-2xl px-4 pb-24 pt-6 sm:px-6 lg:max-w-7xl lg:px-8",children:m("div",{className:N("grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-4"),children:[a("div",{className:"lg:col-span-4",children:m("div",{className:N("grid grid-cols-2 gap-x-2 gap-y-4 sm:grid-cols-2 sm:gap-x-2 sm:gap-y-10 lg:grid-cols-4 lg:gap-x-4"),children:[!T(l)&&K(l).map(d=>a(P,{product:d},d.slug)),(o||s)&&a(f,{children:Array.from({length:9}).map((d,n)=>a("div",{className:"flex h-full min-h-[375px] animate-pulse rounded-lg bg-gray-200"},n))})]})}),a("div",{ref:c})]})})}const fe=()=>{var p;const e=C(),l=k(),{pageNo:o}=U(),s=u.exports.useMemo(()=>z(e==null?void 0:e.categories,(h,b)=>({...h,index:b})),[e]),[{y:i}]=F(),t=i>500,c=(s==null?void 0:s.length)>2,d=(s==null?void 0:s.length)>1,n=[];if(d)for(let h=1;h<=o;h++)n.push(a(pe,{categories:s,page:h,totalPage:o},h));else n.push(a(xe,{},"products-list"));return m("section",{id:"home-page",children:[((p=l==null?void 0:l.heroSection)==null?void 0:p.enabled)&&a(q,{}),c&&a(ue,{}),a("div",{className:"pb-24",id:"home-content",children:n}),a(H,{isVisible:t}),a(ce,{})]})},be=({children:e})=>{var c;const l=C(),o=k(),[{y:s}]=F(),i=u.exports.useMemo(()=>z(l==null?void 0:l.categories,(d,n)=>({...d,index:n})),[l]),t=s>500;return m("section",{id:"home-page",children:[((c=o==null?void 0:o.heroSection)==null?void 0:c.enabled)&&a(q,{}),a(ne,{categories:i}),a(H,{isVisible:t})]})};function ve(){const e=C();de();let l;if(e)switch(e.templateName){case"Quick Order":case"Wholesale":l=a(be,{});break;default:l=a(fe,{})}return a(f,{children:l})}function Re(){var l;const e=oe();return m(f,{children:[m(se,{children:[a("title",{children:(l=`${e==null?void 0:e.metaTitle}`)!=null?l:"Welcome to Store.link"}),a("meta",{name:"description",content:e==null?void 0:e.metaDesc})]}),a(he,{children:a(ve,{})})]})}async function Oe(e){try{if(!ee())return;const{pageData:l,hostname:o}=e,{store:s}=JSON.parse(l),{categories:i,templateName:t}=s,c=1,d=t==="Quick Order"||t==="Wholesale"?100:12;let n;const p=(i==null?void 0:i.length)>1;p||t==="Quick Order"||t==="Wholesale"?n=await j(W(o)+`/store/${s==null?void 0:s.id}/grouped-products-by-category?page=${c}&products=${d}`):n=await j(W(o)+`/store/${s==null?void 0:s.id}/products?page=${c}`);const h={products:{activeCategory:null}},b=$(s,"storeSettings.seo"),x={};switch(t){case"Quick Order":case"Wholesale":x[_(()=>`/store/${s==null?void 0:s.id}/grouped-products-by-category?page=${c}&products=${d}`)]=[n];break;default:p?x[`/store/${s==null?void 0:s.id}/grouped-products-by-category?page=${c}`]=n:x[_(()=>`/store/${s==null?void 0:s.id}/products?page=${c}`)]=[n]}return{pageContext:{storeState:h,documentProps:b,fallback:{["/store"]:{store:s},...x}}}}catch(l){throw console.log("\u{1F680} ~ onBeforeRender ~ error ~ Home page",l),new Error("error")}}export{Re as Page,Oe as onBeforeRender};